<!DOCTYPE html>
<html>
<head>
  
</head>
<body>
  <div id="header">
    <h1>Dress Up Reid!</h1>
    <p>By @<a href="https://www.instagram.com/quollian/" target="_blank">quollian</a></p>
  </div>
  
  <div id="page">
  <div id="mainContainer">
      <img src="images/base/bg.png">
      <img src="images/base/hairBack.png">
      <img src="images/base/body.png">
      <img src="images/base/hairFront.png">
      <img src="images/base/foreground.png">
  </div>
  

  <div id="controls">
    <button onclick="showScreens(0)">Shirts</button>
    <button onclick="showScreens(1)">Pants</button>
    <button onclick="showScreens(2)">Shoes</button>
    <button onclick="showScreens(3)">Overshirts</button>
    <button onclick="showScreens(4)">Gloves</button>
    <button onclick="showScreens(5)">Capes</button>

    
    <!--<button onclick="toggleItem(blackPants)">blackPants</button>-->
  </div>

  <div id="screens">
    <p><i>Click on a category to see clothing options.</i></p>
  </div>

  </div>
  
</body>
</html>

<style>

  body {
    background-color: #332626;
    font-family: 'Courier New', Courier, monospace;
  }
  body p {
    margin: 0px;
  }
  #header {
    color: #e7d9c7;
    text-align: center;
    padding: 16px;
  }
  #header h1 {
    color: #9bad82;
    margin: 0px;
  }
  #header a {
    color:#e7d9c7;
  }

  #page {
    margin: auto;
    padding: 20px;
    background-color: #e7d9c7;
    max-width: 510px;
    border-radius: 10px;
  }
  #mainContainer {
    position: relative;
    margin: auto;
    width: 70vw;
    height: 90vw;
    max-width: 490px;
    max-height: 700px;
  }

  #mainContainer img {
    position: absolute;
    width: 100%;
    height: 100%;

  }

  #controls {
    padding: 10px;
    position: static;
    display: flex;
    justify-content: space-between;
  }
  #controls button {
    font-family: 'Courier New', Courier, monospace;
    font-size: 11pt;
    text-decoration: underline;
    background: none;
    border: none;
  }

  #screens {
    padding: 10px;
    position: static;
    display: flex;
    justify-content: space-between;
    gap: 5px 15px;
    text-align: center;
    flex-wrap: wrap;
    justify-content: center;
    height: 120px;
    align-content: flex-start;
  }
  #screens button {
    font-family: 'Courier New', Courier, monospace;
    font-size: 11pt;
    padding: 2px 10px;
    max-height: 24px;
    border: none;
    color: #332626;
    border-radius: 5px;
  }
  button#activeScreen {
    color:#6d775f;
  }

  #states {
    width: 100%;
  }
  #states button {
    background: none;
    text-decoration: underline;
    
  }
  button#activeButton {
    background:#332626;
    color:#9bad82;
  }


</style>

<script>

  let sleevesTucked = false;
  let shirtTucked = false;
  let pantsTucked = false;
  let pantsMid = false;
  let pantsShort = false;

  // base images
  const bg = {show: true, category:"base", item:"bg", type:"", name: "Background", trigger: ""};
  const hairBack = {show: true, category:"base", item:"hairBack", type:"", name: "Hair Back", trigger: ""};
  const hairFront = {show: true, category:"base", item:"hairFront", type:"",  name: "Body", trigger: ""};
  const body = {show: true, category:"base", item:"body", type:"",  name: "Hair Front", trigger: ""};
  const foreground = {show: true, category:"base", item:"foreground", type:"", name: "Foreground", trigger: ""};

  // Shirts
  const whiteShirt = {show: false, category:"Shirts", item:"whiteShirt", type:"looseUntucked",  name: "Basic White Shirt", trigger: ""};
  const highneckShirt = {show: false, category:"Shirts", item:"highneckShirt", type:"looseUntucked",  name: "Highneck Shirt", trigger: ""};
  const laceShirt = {show: false, category:"Shirts", item:"laceShirt", type:"fittedUntucked",  name: "Laced Sleeves Shirt", trigger: ""};
  const meshShirt = {show: false, category:"Shirts", item:"meshShirt", type:"fittedTucked",  name: "Mesh Shirt", trigger: ""};
  const offshoulderShirt = {show: false, category:"Shirts", item:"offshoulderShirt", type:"fittedUntucked",  name: "Shoulder Cutout Shirt", trigger: ""};
  const panShirt = {show: false, category:"Shirts", item:"panShirt", type:"looseUntucked",  name: "Pan Shirt", trigger: ""};

  //Pants
  const blackPants = {show: false, category:"Pants", item:"blackPants", type:"long",  name: "Black Pants", trigger: ""};
  const brownPants = {show: false, category:"Pants", item:"brownPants", type:"long",  name: "Brown Pants", trigger: ""};
  const lacedPants = {show: false, category:"Pants", item:"lacedPants", type:"long",  name: "Laced Pants", trigger: ""};

  //Shoes
  const decorativeBoots = {show: false, category:"Boots", item:"decorativeBoots", type:"",  name: "Decorative Boots", trigger: "Pants (Short)"};
  const blackBoots = {show: false, category:"Boots", item:"blackBoots", type:"",  name: "Black Boots", trigger: "Pants (Mid)"};
  const flaredBoots = {show: false, category:"Boots", item:"flaredBoots", type:"",  name: "Flared Boots", trigger: "Pants (Short)"};
  const shortBoots = {show: false, category:"Boots", item:"shortBoots", type:"",  name: "Short Boots", trigger: "Pants (Mid)"};

  // Overshirts
  const leafcoat = {show: false, category:"Overshirts", item:"leafcoat", type:"",  name: "Leaf Coat", trigger: "Tucked Shirt"};
  const redcoat = {show: false, category:"Overshirts", item:"redcoat", type:"",  name: "Red Coat", trigger: "Tucked Shirt"};
  const leatherCuiras = {show: false, category:"Overshirts", item:"leatherCuiras", type:"",  name: "Leather Cuiras", trigger: "Tucked Shirt"};
  const openVest = {show: false, category:"Overshirts", item:"openVest", type:"",  name: "Open Vest", trigger: "Tucked Shirt"};
  const splitTunic = {show: false, category:"Overshirts", item:"splitTunic", type:"",  name: "Split Tunic", trigger: "Tucked Shirt"};
  const vest = {show: false, category:"Overshirts", item:"vest", type:"",  name: "Vest", trigger: "Vest"};

  // Gloves
  const moon = {show: false, category:"Gloves", item:"moon", type:"",  name: "Moon Gloves", trigger: "Sleeves"};
  const short = {show: false, category:"Gloves", item:"short", type:"",  name: "Short Gloves", trigger: "Sleeves"};
  const bandedGloves = {show: false, category:"Gloves", item:"bandedGloves", type:"",  name: "Banded Gloves", trigger: "Sleeves"};
  const beltGloves = {show: false, category:"Gloves", item:"beltGloves", type:"",  name: "Belted Gloves", trigger: "Sleeves"};
  const blackFur = {show: false, category:"Gloves", item:"blackFur", type:"",  name: "Black Fur", trigger: "Sleeves"};
  const whiteFur = {show: false, category:"Gloves", item:"whiteFur", type:"",  name: "White Fur", trigger: "Sleeves"};
  const splitGloves = {show: false, category:"Gloves", item:"splitGloves", type:"",  name: "Split Gloves", trigger: "Sleeves"};

  // Collars
  const furCollarBlack = {show: false, category:"Collars", item:"furCollarBlack", type:"",  name: "Black Fur Collar", trigger: "Tucked Shirt"};
  const furCollarWhite = {show: false, category:"Collars", item:"furCollarWhite", type:"",  name: "White Fur Collar", trigger: "Tucked Shirt"};
  const panCollar = {show: false, category:"Collars", item:"panCollar", type:"",  name: "Pan Collar", trigger: ""};
  const whiteShirtCollar = {show: false, category:"Collars", item:"whiteShirtCollar", type:"",  name: "White Collar", trigger: ""};

  // buttonsScreens
  let buttonScreens = ["Shirts", "Pants", "Boots", "Overshirts", "Gloves", "Capes"];


  let imageArray = [bg, hairBack, body, decorativeBoots, blackBoots, flaredBoots, shortBoots, blackPants, brownPants, lacedPants, whiteShirt, highneckShirt, laceShirt, meshShirt, offshoulderShirt, panShirt, short, moon, beltGloves, blackFur, whiteFur, splitGloves, bandedGloves, leatherCuiras, openVest, splitTunic, vest, leafcoat, redcoat, hairFront, foreground];


  let savedScreen = 0;
  function showScreens(screenNumber){

    savedScreen = screenNumber;

    generateOptions(screenNumber);
    let returnedString = "";

    for (i = 0; i < imageArray.length; i++){
      if (buttonScreens[screenNumber] == imageArray[i].category){
        if (imageArray[i].show){
          returnedString = returnedString + '<button id="activeButton" onclick="toggleItem(' + imageArray[i].item + ')">'+ imageArray[i].name + '</button>';
        }
        else {
          returnedString = returnedString + '<button onclick="toggleItem(' + imageArray[i].item + ')">'+ imageArray[i].name + '</button>';
        }
      }
    }

    if (buttonScreens[screenNumber] == "Pants"){
      returnedString = returnedString + '<div id="states"><button onclick="tuckPants()">Tuck Pants</button></div>';
    }
    else if (buttonScreens[screenNumber] == "Shirts"){
      returnedString = returnedString + '<div id="states"><button onclick="tuckShirt()">Tuck Shirt</button></div>';
    }

    document.getElementById("screens").innerHTML = returnedString;

  }

  function generateOptions(screenNumber){
    let returnString = "";

    for (let i = 0; i < buttonScreens.length; i++){
      if(i == savedScreen){
        returnString = returnString + '<button id="activeScreen" onclick="showScreens(' + i + ')">' + buttonScreens[i] +'</button>';
      }
      else {
        returnString = returnString + '<button onclick="showScreens(' + i + ')">' + buttonScreens[i] +'</button>';
      }
    }

    document.getElementById("controls").innerHTML = returnString;
  }

  function tuckPants(){
    if (pantsTucked == true) {
      pantsTucked = false;
      for (i = 0; i < imageArray.length; i++){
        if (imageArray[i].category == "Pants"){
          imageArray[i].type = "long";
        }
      }
    }
    else if (pantsMid == true){
      pantsTucked = true;
      for (i = 0; i < imageArray.length; i++){
        if (imageArray[i].category == "Pants"){
          imageArray[i].type = "mid";
        }
      }
    }
    else if (pantsShort == true){
      pantsTucked = true;
      for (i = 0; i < imageArray.length; i++){
        if (imageArray[i].category == "Pants"){
          imageArray[i].type = "short";
          console.log(imageArray[i]);
        }
      }
    }
    else {
      pantsTucked = false;
      for (i = 0; i < imageArray.length; i++){
        if (imageArray[i].category == "Pants"){
          imageArray[i].type = "long";
        }
      }
    }

    updateImage();
  }

  function tuckShirt(){

    if (shirtTucked == true) {
      shirtTucked = false;
      for (i = 0; i < imageArray.length; i++){
        if (imageArray[i].category == "Shirts"){
          if (imageArray[i].type == "fittedTucked"){
            imageArray[i].type = "fittedUntucked";
          }
          else {
            imageArray[i].type = "looseUntucked";
          }
        }
      }
    }
    else {
      shirtTucked = true;
      for (i = 0; i < imageArray.length; i++){
        if (imageArray[i].category == "Shirts"){
          if (imageArray[i].type == "fittedUntucked"){
            imageArray[i].type = "fittedTucked";
          }
          else {
            imageArray[i].type = "looseTucked";
          }
        }
      }
    }

    updateImage();
  }

  function tuckSleeves(){

    if (sleevesTucked == true) {
      sleevesTucked = false;
      for (i = 0; i < imageArray.length; i++){
        if (imageArray[i].category == "Shirts"){
          if (imageArray[i].type == "fittedTucked"){
            imageArray[i].type = "looseTucked";
          }
          else {
            imageArray[i].type = "looseUntucked";
          }
        }
      }
    }
    else {
      sleevesTucked = true;
      for (i = 0; i < imageArray.length; i++){
        if (imageArray[i].category == "Shirts"){
          if (imageArray[i].type == "looseTucked"){
            imageArray[i].type = "fittedTucked";
          }
          else {
            imageArray[i].type = "fittedUntucked";
          }
        }
      }
    }

    updateImage();
  }



  function toggleItem(item) {

    // hide item if its already showing
    if (item.show == true){
      item.show = false;
      uncheckTrigger(item);
    }
    // show item
    else {
      item.show = true;
      checkTrigger(item);
    }

    updateImage();
    showScreens(savedScreen);
  }

  // check if the item sets of any other special conditions
  function checkTrigger(item){
    if (item.trigger == "Sleeves"){
      // Make sure all shirts have fitted sleeves
      sleevesTucked = true;
      for (let i = 0; i < imageArray.length; i++){
        if (imageArray[i].category == "Shirts"){
          if (imageArray[i].type == "looseTucked"){
            imageArray[i].type = "fittedTucked";
          }
          else if (imageArray[i].type == "looseUntucked"){
            imageArray[i].type = "fittedunTucked";
          }
        }
      }
    }
    else if (item.trigger == "Tucked Shirt"){
      // Make sure all shirts are tucked in
      console.log("here");
      shirtTucked = true;
      for (let i = 0; i < imageArray.length; i++){
        if (imageArray[i].category == "Shirts"){
          console.log(imageArray[i]);
          if (imageArray[i].type == "looseUntucked"){
            console.log("tucking");
            imageArray[i].type = "looseTucked";
            console.log(imageArray[i]);
          }
          else if (imageArray[i].type == "fittedUntucked"){
            imageArray[i].type = "fittedTucked";
          }
        }
      }
    }
    else if (item.trigger == "Pants (Short)"){
      // Make sure all pants are short
      pantsShort = true;
      pantsMid = false;
      for (let i = 0; i < imageArray.length; i++){
        if (imageArray[i].category == "Pants"){
          imageArray[i].type = "short";
        }
      }
    }
    else if (item.trigger == "Pants (Mid)"){
      // Make sure all pants are mid
      pantsShort = false;
      pantsMid = true;
      for (let i = 0; i < imageArray.length; i++){
        if (imageArray[i].category == "Pants"){
          imageArray[i].type = "mid";
        }
      }
    }
  }

  function uncheckTrigger(item){
    if (item.trigger == "Sleeves"){
      // Check if any other items are showing that have this trigger active
      let otherShowing = false;
      for (let i = 0; i < imageArray.length; i++){
        if ((imageArray[i].trigger == "Sleeves") && (imageArray[i].show == true)){
          otherShowing = true;
        }
      }
      // if not, untrigger.
      if (otherShowing == false){
        sleevesTucked = false;
        for (let i = 0; i < imageArray.length; i++){
          if (imageArray[i].category == "Shirts"){
            if (imageArray[i].type == "fittedUntucked"){
              imageArray[i].type = "looseUntucked";
            }
            else if (imageArray[i].type == "fittedTucked"){
              imageArray[i].type = "looseTucked";
            }
          }
        }
      }
    }
    else if (item.trigger == "Tucked Shirt"){
      // Check if any other items are showing that have this trigger active
      let otherShowing = false;
      for (let i = 0; i < imageArray.length; i++){
        if ((imageArray[i].trigger == "Tucked Shirt") && (imageArray[i].show == true)){
          otherShowing = true;
        }
      }
      // if not, untrigger.
      if (otherShowing == false){
        shirtTucked = false;
        for (let i = 0; i < imageArray.length; i++){
          if (imageArray[i].category == "Shirts"){
            if (imageArray[i].type == "fittedTucked"){
              imageArray[i].type = "fittedUntucked";
            }
            else if (imageArray[i].type == "looseTucked"){
              imageArray[i].type = "looseUntucked";
            }
          }
        }
      }
    }
    else if (item.trigger == "Pants (Short)"){
      // Check if any other items are showing that have this trigger active
      let otherShowing = false;
      for (let i = 0; i < imageArray.length; i++){
        if ((imageArray[i].trigger == "Pants (Short)") && (imageArray[i].show == true)){
          otherShowing = true;
        }
      }
      // if not, untrigger.
      if (otherShowing == false){
        pantsShort = false;
        for (let i = 0; i < imageArray.length; i++){
          if (imageArray[i].category == "Pants"){
            imageArray[i].type = "long";
          }
        }
      }
    }
    else if (item.trigger == "Pants (Mid)"){
      // Check if any other items are showing that have this trigger active
      let otherShowing = false;
      for (let i = 0; i < imageArray.length; i++){
        if ((imageArray[i].trigger == "Pants (Mid)") && (imageArray[i].show == true)){
          otherShowing = true;
        }
      }
      // if not, untrigger.
      if (otherShowing == false){
        pantsMid = false;
        for (let i = 0; i < imageArray.length; i++){
          if (imageArray[i].category == "Pants"){
            imageArray[i].type = "long";
          }
        }
      }
    }
  }

  function compileString(){
    let outputString = "";
    for (let i = 0; i < imageArray.length; i++) {
      if (imageArray[i].show){
        outputString = outputString + '<img class="item" src="' + findPath(imageArray[i]) + '">';
      }
    }

    return outputString;
  }

  function findPath(item){
    let output = "";
    if (item.type == ""){
      output = "images/" + item.category + "/" + item.item + ".png";
    }
    else {
      output = "images/" + item.category + "/" + item.item + "/" + item.item +"_" + item.type + ".png";
    }
    
    return output;

  }  
  
  function updateImage() {
    document.getElementById("mainContainer").innerHTML = compileString();
  }


</script>
